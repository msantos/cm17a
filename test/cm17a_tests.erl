-module(cm17a_tests).

-compile(export_all).

-include_lib("eunit/include/eunit.hrl").

encode_test() ->
    ?assertEqual(<<213,170,80,40,173>>, cm17a:encode($D, 3, off)).

insn_test() ->
    Insn = case os:type() of
        {unix,linux} ->
            [{21526,6,350}, {21527,2,1}, {21526,6,0}, {21527,2,1}, {21526,6,0},
             {21527,4,1}, {21526,6,0}, {21527,2,1}, {21526,6,0}, {21527,4,1},
             {21526,6,0}, {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0},
             {21527,2,1}, {21526,6,0}, {21527,2,1}, {21526,6,0}, {21527,4,1},
             {21526,6,0}, {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0},
             {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1},
             {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,4,1}, {21526,6,0},
             {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1},
             {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,4,1}, {21526,6,0},
             {21527,4,1}, {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,4,1},
             {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1}, {21526,6,0},
             {21527,4,1}, {21526,6,0}, {21527,2,1}, {21526,6,0}, {21527,4,1},
             {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,4,1}, {21526,6,0},
             {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1},
             {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1}, {21526,6,0},
             {21527,2,1}, {21526,6,0}, {21527,4,1}, {21526,6,0}, {21527,2,1},
             {21526,6,0}, {21526,6,350}];
        {unix,BSD} when BSD =:= freebsd; BSD =:= netbsd; BSD =:= openbsd ->
            [{2147775596,6,350}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0},
             {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1},
             {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0},
             {2147775595,2,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1},
             {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0},
             {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1},
             {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0},
             {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1},
             {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0},
             {2147775595,4,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,4,1},
             {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0},
             {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1},
             {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0},
             {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1},
             {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1}, {2147775596,6,0},
             {2147775595,2,1}, {2147775596,6,0}, {2147775595,4,1}, {2147775596,6,0}, {2147775595,2,1},
             {2147775596,6,0}, {2147775596,6,350}]
    end,
    ?assertEqual(Insn, cm17a:insn(<<213,170,80,40,173>>)).
